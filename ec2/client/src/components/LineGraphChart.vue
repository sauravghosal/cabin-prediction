<template>
   <div id="chart">
      <apexchart type="area" height="350" :options="chartOptions" :series="series"></apexchart>
  </div>
</template>

<script>
import VueApexCharts from "vue3-apexcharts";

export default {
  name: 'LineGraphChart',
  components: {
    apexchart: VueApexCharts,
  },
  data() {
    return {
          series: [],
          chartOptions: {
            chart: {
              type: 'area',
              stacked: false,
              height: 350,
              zoom: {
                type: 'x',
                enabled: true,
                autoScaleYaxis: true
              },
              toolbar: {
                autoSelected: 'zoom'
              }
            },
            dataLabels: {
              enabled: false
            },
            markers: {
              size: 0,
            },
            title: {
              text: 'Smoky Mountain Lodge Occupancy',
              align: 'left'
            },
            yaxis: {
              title: {
                text: 'Occupancy'
              },
            },
            xaxis: {
              type: 'datetime',
            },
  
          },
      }
  },
  created() {
    this.fetchData()
  },
  methods: {
    fetchData() {
      // let url = new URL('http://127.0.0.1:5000/api')
      // url.search = new URLSearchParams({start_date: '10-10-2019', end_date: '11-10-2019', cabin: 'Smoky Mountain Lodge'}).toString();
      // fetch(url).then(res => res.json()).then(data => console.log(data)) 
      let data = this.sampleData()
      let dates = []        
      for (var key of Object.keys(data)) {
          dates.push([Date.parse(key), this.numberAdd(data[key])])
      }
      this.series = [{
            name: 'Smoky Mountain Lodge',
            data: dates
          }]
    },
    sampleData() {
      return {
      "10-10-2019": "111111000110111110000001111001110111111011111100111110001111111111100000011111000111111110000000000011100001100000000000000000000000000000000111000000000001111000000000001110000000",
      "10-11-2019": "111110001101111100000011110011101111110111111001111100011111111111000000111110001111111100000000000111000011000000000000000000000000000000001110000000000011110000000000011100000000",
      "10-12-2019": "111100011011111000000111100111011111101111110011111000111111111110000001111100011111111000000000001110000110000000000011100000000000000000011100000000000111100000000000111000000000",
      "10-13-2019": "111000110111110000001111001110111111011111100111110001111111111100000011111000111111110000000000011100001100000000000111000000000000000000111000000000001111000000000001110000000000",
      "10-14-2019": "110001101111100000011110011101111110111111001111100011111111111000000111110001111111100000000000111000011000000000001110000000000000000001110000000000011110000000000011100000000000",
      "10-15-2019": "100011011111000000111100111011111101111110011111000111111111110000001111100011111111000000000001110000110000000000011100000000000000000011100000000000111100000000000111000000000000",
      "10-16-2019": "000110111110000001111001110111111011111100111110001111111111100000011111000111111110000000000011100001100000000000111000000000000000000111000000000001111000000000001110000000000000",
      "10-17-2019": "000001111100000011110011101111110111111001111100011111111111000000111110001111111100000000000111000011000000000001110000000000000000001110000000000011110000000000011100000000000001",
      "10-18-2019": "111011111000000111100111011111101111110011111000111111111110000001111100011111111000000000001110000110000000000011100000000000000000011100000000000111100000000000111000000000000011",
      "10-19-2019": "110111110000001111001110111111011111100111110001111111111100000011111000111111110000000000011100001100000000000111000000000000000000111000000000001111000000000001110000000000000111",
      "10-20-2019": "101111100000011110011101111110111111001111100011111111111000000111110001111111100011111000111000011000000000001110000000000000000001110000000000011110000000000011100000000000001111",
      "10-21-2019": "011111000000111100111011111101111110011111000111111111110000001111100011111111000111110001110000110000000000011100000000000000000011100000000000111100000000000111000000000000011111",
      "10-22-2019": "000000000001111001110111111011111100111110001111111111100000011111000111111110001111100011100001100000000000111000000000000000000111000000000001111000000000001110000000000000111111",
      }
    }, 
    numberAdd(str) {
      var strArr = str.split(""), strTemp=0;
      for(let i=0;i<strArr.length;i++){
        if(!isNaN(strArr[i])){
          strTemp+=parseInt(strArr[i]);
        }
      }
      return strTemp;
  }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
h3 {
  margin: 40px 0 0;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #42b983;
}
</style>
